<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AiPairWise - Smart AI Tool Combinations for Small Business</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .gradient-header { background: linear-gradient(135deg, #10B981 0%, #059669 100%); }
    @media print {
      .no-print { display: none !important; }
      .print-only { display: block !important; }
    }
  </style>
</head>
<body class="bg-gray-50">

  <!-- Header -->
  <header class="gradient-header text-white py-8 no-print">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-4xl font-bold mb-2">ü§ù AiPairWise</h1>
      <p class="text-xl opacity-90">Smart AI Tool Combinations for Small Business Success</p>
    </div>
  </header>

  <!-- Email Capture -->
  <section class="container mx-auto px-4 my-8 max-w-md" id="emailCapture">
    <form id="auditEmailForm" class="bg-white p-6 shadow rounded-lg space-y-4">
      <div>
        <label for="firstName" class="font-semibold text-gray-700">First Name *</label>
        <input id="firstName" name="firstName" type="text" required 
               data-color="blue"
               class="w-full p-3 border-2 border-blue-200 rounded-lg focus:outline-none" />
        <p id="error-firstName" class="text-red-500 text-sm mt-1" aria-live="polite"></p>
      </div>
      <div>
        <label for="email" class="font-semibold text-gray-700">Email *</label>
        <input id="email" name="email" type="email" required 
               data-color="blue"
               class="w-full p-3 border-2 border-blue-200 rounded-lg focus:outline-none" />
        <p id="error-email" class="text-red-500 text-sm mt-1" aria-live="polite"></p>
      </div>
      <button type="submit" 
              class="w-full bg-green-600 text-white px-4 py-3 rounded-lg font-bold hover:bg-green-700">
        üöÄ Start My AI Assessment
      </button>
    </form>
  </section>

  <!-- Audit Tool -->
  <section class="container mx-auto px-4 my-8 max-w-4xl hidden" id="auditTool">
    <div class="bg-white p-6 rounded-lg shadow-lg">
      <h2 class="text-2xl font-bold text-blue-800 mb-4">üîç AI Workflow Assessment</h2>
      <p class="mb-6 text-gray-600">Answer the following to generate your personalized roadmap:</p>

      <!-- Step 1 -->
      <div class="mb-6">
        <label for="businessType" class="font-semibold text-gray-700">What type of business do you run?</label>
        <select id="businessType" required data-color="blue"
                class="w-full p-3 border-2 border-blue-200 rounded-lg">
          <option value="">Select...</option>
          <option>E-commerce</option>
          <option>Services</option>
          <option>Real Estate</option>
        </select>
        <p id="error-businessType" class="text-red-500 text-sm mt-1"></p>
      </div>

      <!-- Step 2 -->
      <div class="mb-6">
        <label for="timeDrain" class="font-semibold text-gray-700">Biggest time drain?</label>
        <select id="timeDrain" required data-color="emerald"
                class="w-full p-3 border-2 border-emerald-200 rounded-lg">
          <option value="">Select...</option>
          <option>Content creation</option>
          <option>Customer support</option>
          <option>Admin tasks</option>
        </select>
        <p id="error-timeDrain" class="text-red-500 text-sm mt-1"></p>
      </div>

      <!-- Step 3 -->
      <div class="mb-6">
        <label for="budget" class="font-semibold text-gray-700">Monthly budget for AI tools?</label>
        <select id="budget" required data-color="purple"
                class="w-full p-3 border-2 border-purple-200 rounded-lg">
          <option value="">Select...</option>
          <option>$0-50</option>
          <option>$51-150</option>
          <option>$151-300</option>
        </select>
        <p id="error-budget" class="text-red-500 text-sm mt-1"></p>
      </div>

      <button onclick="generateRecommendations(event)" 
              class="bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700">
        ‚ö° Generate Recommendations
      </button>
    </div>
  </section>

  <!-- Results -->
  <section class="container mx-auto px-4 my-8 max-w-3xl hidden" id="resultsContainer">
    <div class="bg-white p-6 shadow-lg rounded-lg">
      <h2 class="text-2xl font-bold text-green-800 mb-4">‚úÖ Your Personalized AI Roadmap</h2>
      <p class="text-gray-700">Thank you, <span id="userName"></span>! 
         Based on your inputs, here are the best AI workflows for your business.</p>

      <ul class="list-disc ml-6 mt-4 text-gray-700 space-y-2" id="recommendationList"></ul>

      <div class="mt-6 flex gap-4">
        <button onclick="downloadPDF()" 
                class="bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700">
          üìÑ Download PDF Report
        </button>
        <button onclick="resetApp()" 
                class="bg-gray-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-gray-700">
          üîÑ Restart
        </button>
      </div>
    </div>
  </section>

  <script>
    // Reset border color
    function resetBorder(input) {
      input.classList.remove("border-red-500", "border-green-500");
      if (input.dataset.color) {
        input.classList.add(`border-${input.dataset.color}-200`);
      }
    }

    // Email capture form
    document.getElementById('auditEmailForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const formData = new FormData(e.target);
      const firstName = formData.get('firstName').trim();
      const email = formData.get('email').trim();
      let valid = true;

      // Validate name
      const firstInput = document.getElementById('firstName');
      const firstError = document.getElementById('error-firstName');
      if (!firstName) {
        firstInput.classList.add("border-red-500");
        firstError.textContent = "First name required";
        valid = false;
      } else { resetBorder(firstInput); firstError.textContent=""; }

      // Validate email
      const emailInput = document.getElementById('email');
      const emailError = document.getElementById('error-email');
      if (!email.includes("@")) {
        emailInput.classList.add("border-red-500");
        emailError.textContent = "Valid email required";
        valid = false;
      } else { resetBorder(emailInput); emailError.textContent=""; }

      if (!valid) return;

      // Save
      window.userData = { firstName, email };
      localStorage.setItem("aiPairwiseUser", JSON.stringify(window.userData));

      // Send to Google Sheets (replace with your Script ID)
      fetch("https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec", {
        method: "POST",
        body: new URLSearchParams(window.userData),
      }).catch(err => console.log("‚ö†Ô∏è Sheets error:", err));

      // Show next step
      document.getElementById("emailCapture").classList.add("hidden");
      document.getElementById("auditTool").classList.remove("hidden");
    });

    // Generate recommendations
    function generateRecommendations(e) {
      e.preventDefault();
      let valid = true;
      ["businessType","timeDrain","budget"].forEach(id=>{
        const el=document.getElementById(id);
        const err=document.getElementById("error-"+id);
        if(!el.value){ el.classList.add("border-red-500"); err.textContent="Required"; valid=false; }
        else { resetBorder(el); err.textContent=""; }
      });
      if(!valid) return;

      const businessType=document.getElementById("businessType").value;
      const timeDrain=document.getElementById("timeDrain").value;
      const budget=document.getElementById("budget").value;

      const list=document.getElementById("recommendationList");
      list.innerHTML="";
      list.innerHTML+=`<li>As a <b>${businessType}</b>, AI can help automate <b>${timeDrain}</b>.</li>`;
      list.innerHTML+=`<li>With a budget of <b>${budget}</b>, start with ChatGPT + Zapier for quick wins.</li>`;
      list.innerHTML+=`<li>Later, expand to specialized tools for scale.</li>`;

      document.getElementById("auditTool").classList.add("hidden");
      document.getElementById("resultsContainer").classList.remove("hidden");
      document.getElementById("userName").textContent = window.userData?.firstName || "User";
    }

    // PDF download
    function downloadPDF() {
      const element=document.getElementById("resultsContainer");
      html2pdf().from(element).set({
        margin:0.5, filename:"AiPairWise_Assessment.pdf",
        image:{type:"jpeg",quality:0.98},
        html2canvas:{scale:2,useCORS:true},
        jsPDF:{unit:"in",format:"letter",orientation:"portrait"}
      }).save();
    }

    // Restart app
    function resetApp() {
      localStorage.removeItem("aiPairwiseUser");
      location.reload();
    }

    // Restore saved user
    document.addEventListener("DOMContentLoaded", () => {
      const saved = localStorage.getItem("aiPairwiseUser");
      if (saved) {
        const data = JSON.parse(saved);
        document.getElementById("firstName").value = data.firstName;
        document.getElementById("email").value = data.email;
      }
    });
  </script>
</body>
</html>
